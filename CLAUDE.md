# CLAUDE.md — 프로젝트 개발 지침 (WEB_JustGolf)

## 1. 기본
- 모든 커뮤니케이션은 **한국어(한글)** 기본.
- 기술 스택: **Next.js(App Router) + Supabase + Vercel**.
- 목표: 기능 구현뿐 아니라 **운영/보안/테스트/문서**까지 포함한 완성.

## 2. 환경/보안
- Supabase 개발/운영 프로젝트 분리:
  - 개발: `env.local` 또는 `.env.local`
  - 운영: `env.production.local`
- 환경변수:
  - `NEXT_PUBLIC_SUPABASE_URL`, `NEXT_PUBLIC_SUPABASE_ANON_KEY`
  - `SUPABASE_SERVICE_ROLE_KEY` (서버 전용, 절대 프론트 노출 금지)
- 키/토큰/개인정보는 로그/에러메시지/문서/커밋 어디에도 남기지 않는다.

## 3. 배포/품질 게이트
- **git push 전에 반드시 `npm run build` 성공**.
- 가능하면 `npm run lint`도 함께 통과시키고,
- 변경 범위가 크면 `npm run test`(vitest) / `npm run test:e2e`(playwright) 중 적절한 검증을 포함한다.

## 4. DB/RLS 정책
- DB 변경은 `db/migrations/*.sql`로 작성하고,
- **Supabase SQL Editor에서 수동 실행**되는 프로세스를 따른다.
- RLS는 보안 경계의 핵심이므로:
  - “관리자/일반/비로그인” 3케이스를 항상 점검한다.
  - 서버 라우트에서도 권한 체크(가드)를 병행한다.

## 5. 구현가이드 문서 우선
- 사용자가 특정 가이드(DevGuide/Docs)를 지정하면 그 문서가 **최우선 규격**이다.
- 문서에 검증 체크리스트가 있다면 그대로 테스트/QA 항목으로 사용한다.
- 작업이 길어지면 스스로 “완성도 체크리스트”를 생성하고 끝까지 닫는다(누락 0).

## 6. 작업 스타일
- 코드를 제안할 때:
  - “설계/근거/대안/리스크”를 먼저 짧게 정리한 뒤 구현한다.
- 대규모 변경은 단계적으로:
  1) 최소 동작 버전
  2) 테스트 추가
  3) 리팩터/성능/접근성
  순으로 제안한다.
- 파일 수정은 “왜 이 파일을 바꾸는지”를 항상 설명한다.

## 7. 웹서비스 공통 권장사항
- 접근성(aria/키보드/명도 대비), 반응형, 오류 처리 UX(빈 상태/로딩/에러),
- 성능(불필요 렌더 최소화, 큰 컴포넌트 lazy 고려),
- 관측(에러 재현 가능 로그/테스트)까지 기본으로 포함한다.
